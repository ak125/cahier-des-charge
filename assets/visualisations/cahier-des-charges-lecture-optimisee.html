
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Cahier des Charges ‚Äì Vue compl√®te</title>
  <style>
    body {
      font-family: "Segoe UI", Roboto, sans-serif;
      margin: 0 auto;
      padding: 2rem;
      max-width: 1000px;
      background: #fdfdfd;
      color: #1a1a1a;
    }
    h1 {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 2rem;
    }
    h2 {
      border-bottom: 2px solid #ccc;
      padding-bottom: 0.3rem;
      margin-top: 2rem;
      color: #2c3e50;
    }
    pre {
      background: #f4f4f4;
      padding: 1rem;
      border-left: 4px solid #3498db;
      overflow-x: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .file-section {
      margin-bottom: 3rem;
      background: #fff;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
    }
    .file-section h2 {
      font-size: 1.5rem;
    }
    .filename {
      font-size: 0.9rem;
      color: #999;
      margin-top: -1rem;
      margin-bottom: 1rem;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 0.5rem;
      text-align: left;
    }
    ul {
      padding-left: 1.2rem;
    }
    .content {
      line-height: 1.6;
    }
    .toc {
      background: #f9f9f9;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    .toc h2 {
      margin-top: 0;
    }
    .toc ul {
      list-style-type: none;
    }
  </style>
</head>
<body>
  <h1>üìò Cahier des Charges ‚Äì Vue unifi√©e</h1>
  
  <div class="toc">
    <h2>Table des mati√®res</h2>
    <ul>
      <li><a href="#00-sommaire">00-sommaire.md</a></li>
      <li><a href="#01-introduction">01-introduction.md</a></li>
      <li><a href="#10-checklist-pre-migration">10-checklist-pre-migration.md</a></li>
      <li><a href="#10b-verification-env-test">10b-verification-env-test.md</a></li>
      <li><a href="#10c-finaliser-profil-monorepo">10c-finaliser-profil-monorepo.md</a></li>
      <li><a href="#10d-backlog-par-modules">10d-backlog-par-modules.md</a></li>
      <li><a href="#changelog">changelog.md</a></li>
    </ul>
  </div>

    <div class="file-section" id="00-sommaire">
      <h2>00-sommaire.md</h2>
      <div class="filename">00-sommaire.md</div>
      <div class="content">
        <h1>Cahier des Charges ‚Äì Sommaire</h1>
<ul>
<li>[[01-introduction.md]] ‚Äì Introduction</li>
<li>[[10-checklist-pre-migration.md]] ‚Äì ‚úÖ Checklist d'avant lancement ‚Äì Migration IA s√©curis√©e</li>
<li>[[10b-verification-env-test.md]] ‚Äì ‚úÖ 2. V√©rification et validation de l'environnement de test</li>
<li>[[10c-finaliser-profil-monorepo.md]] ‚Äì ‚úÖ 3. Finaliser le profil du monorepo (profil de r√©f√©rence)</li>
<li>[[10d-backlog-par-modules.md]] ‚Äì ‚úÖ 4. Organiser le backlog de migration par modules fonctionnels</li>
</ul>
      </div>
    </div>
    
    <div class="file-section" id="01-introduction">
      <h2>01-introduction.md</h2>
      <div class="filename">01-introduction.md</div>
      <div class="content">
        <h1>Introduction</h1>
<p>Ce document constitue le cahier des charges du projet.</p>
      </div>
    </div>
    
    <div class="file-section" id="10-checklist-pre-migration">
      <h2>10-checklist-pre-migration.md</h2>
      <div class="filename">10-checklist-pre-migration.md</div>
      <div class="content">
        <h1>‚úÖ Checklist d'avant lancement ‚Äì Migration IA s√©curis√©e</h1>
<p>üéØ Objectif : Avant d'appuyer sur "GO", garantir la pr√©cision, tra√ßabilit√©, auditabilit√© et un retour arri√®re possible √† tout moment.</p>
<hr />
<h2>üîí 1. Geler une copie du code legacy PHP et SQL (immuable)</h2>
<table>
<thead>
<tr>
<th>Action</th>
<th>Objectif</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cr√©er un tag Git <code>legacy-php-vFinal</code></td>
<td>Avoir un point de retour s√ªr</td>
</tr>
<tr>
<td>Sauvegarder <code>mysql.sql</code> horodat√© (<code>YYYYMMDD</code>)</td>
<td>R√©f√©rence absolue pour <code>schema_migration_diff.json</code></td>
</tr>
<tr>
<td>Archiver le fichier <code>.htaccess</code> original</td>
<td>Reproduire les routes + r√®gles SEO √† l'identique</td>
</tr>
<tr>
<td>Archiver tous les scripts <code>core/*.php</code></td>
<td>Permet la comparaison avec les blocs migr√©s</td>
</tr>
<tr>
<td>G√©n√©rer le hash SHA256 du dossier legacy</td>
<td>V√©rification d'int√©grit√© (via <code>audit.md</code>)</td>
</tr>
</tbody>
</table>
<hr />
<h2>üì¶ 2. Geler la structure cible (NestJS + Remix + Prisma)</h2>
<table>
<thead>
<tr>
<th>Action</th>
<th>Objectif</th>
</tr>
</thead>
<tbody>
<tr>
<td>Snapshot de la branche <code>main</code> NestJS/Remix</td>
<td>Base de comparaison pour <code>schema_migration_diff.json</code></td>
</tr>
<tr>
<td>Export du <code>schema.prisma</code> initial</td>
<td>Base pour l'√©volution vers PostgreSQL</td>
</tr>
<tr>
<td>G√©n√©ration d'un <code>structure_index.json</code></td>
<td>Permet le mapping entre legacy et modules modernes</td>
</tr>
</tbody>
</table>
<hr />
<h2>üß† 3. Pr√©parer le socle IA d'analyse et de migration</h2>
<table>
<thead>
<tr>
<th>Action</th>
<th>Objectif</th>
</tr>
</thead>
<tbody>
<tr>
<td>Lancer <code>start_analysis.sh</code> (PhpMetrics, MCP, etc.)</td>
<td>Audit du code legacy</td>
</tr>
<tr>
<td>G√©n√©rer les fichiers <code>.audit.md</code>, <code>.impact_graph.json</code></td>
<td>Identifier les modules critiques</td>
</tr>
<tr>
<td>Valider les d√©pendances IA locales (DeepSeek, n8n)</td>
<td>V√©rifier que tous les agents sont op√©rationnels</td>
</tr>
<tr>
<td>Lancer une PR de pr√©paration de migration</td>
<td>Cr√©e un point d'entr√©e dans le GitOps</td>
</tr>
<tr>
<td>Archiver toutes les entr√©es critiques dans <code>backlog.md</code></td>
<td>Structurer la feuille de route IA</td>
</tr>
</tbody>
</table>
<hr />
<h2>üìÅ 4. Checklist bonus s√©curit√©</h2>
<ul>
<li>[ ] ‚úÖ Tous les fichiers legacy sont archiv√©s dans <code>/archives/legacy/</code></li>
<li>[ ] ‚úÖ Une PR a √©t√© cr√©√©e pour le verrouillage initial</li>
<li>[ ] ‚úÖ Les cl√©s d'acc√®s (BDD, Supabase, IA) sont hors du d√©p√¥t Git</li>
<li>[ ] ‚úÖ Un fichier <code>changelog.md</code> a √©t√© initialis√©</li>
<li>[ ] ‚úÖ Le dashboard Remix <code>/admin/dashboard</code> peut afficher le statut</li>
</ul>
<p>üí° Cette checklist peut √™tre int√©gr√©e dans le pipeline <code>n8n</code> via un agent <code>pre-migration-verifier.ts</code>.
Elle peut √©galement d√©clencher une v√©rification automatique √† chaque modification du legacy.</p>
      </div>
    </div>
    
    <div class="file-section" id="10b-verification-env-test">
      <h2>10b-verification-env-test.md</h2>
      <div class="filename">10b-verification-env-test.md</div>
      <div class="content">
        <h1>‚úÖ 2. V√©rification et validation de l'environnement de test</h1>
<p>üéØ Objectif : S'assurer que tous les outils critiques de migration sont op√©rationnels, interconnect√©s, et correctement configur√©s avant le lancement du pipeline.</p>
<hr />
<h2>üîç V√©rification de l'environnement</h2>
<table>
<thead>
<tr>
<th>Outil</th>
<th>Objectif</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>n8n</strong></td>
<td>Orchestrateur d'agents IA. Doit √™tre d√©ploy√© avec acc√®s au filesystem pour lecture/√©criture.</td>
</tr>
<tr>
<td><strong>Docker / Code Server</strong></td>
<td>N√©cessaires pour l'ex√©cution des agents, t√¢ches automatis√©es, scripts de conversion et analyse.</td>
</tr>
<tr>
<td><strong>MCP</strong></td>
<td>Doit √™tre configur√© avec un token GitHub valide pour cr√©er/valider des PR automatis√©es.</td>
</tr>
<tr>
<td><strong>Supabase</strong> ou <strong>CSV centralis√©</strong></td>
<td>Base de donn√©es ou fichier de suivi des fichiers PHP migr√©s (statut, date, responsable, delta).</td>
</tr>
<tr>
<td><strong>Coolify</strong> ou <strong>Netlify Preview</strong></td>
<td>Permet la pr√©visualisation automatique des PR (version migr√©e vs legacy) via une URL unique.</td>
</tr>
</tbody>
</table>
<hr />
<h2>‚úÖ Checklist de validation</h2>
<ul>
<li>[ ] n8n est op√©rationnel, accessible via navigateur</li>
<li>[ ] Les agents de test s'ex√©cutent correctement via Code Server/Docker</li>
<li>[ ] MCP r√©pond √† une requ√™te de test avec le token GitHub</li>
<li>[ ] Supabase contient une table <code>migration_status</code> ou CSV accessible</li>
<li>[ ] Chaque PR de migration g√©n√®re un lien de preview Netlify ou Coolify</li>
</ul>
<p>üí° Cette v√©rification peut √™tre automatis√©e dans <code>n8n</code> via un agent <code>env-tester.ts</code>
et d√©clench√©e avant chaque ex√©cution majeure du pipeline de migration.</p>
      </div>
    </div>
    
    <div class="file-section" id="10c-finaliser-profil-monorepo">
      <h2>10c-finaliser-profil-monorepo.md</h2>
      <div class="filename">10c-finaliser-profil-monorepo.md</div>
      <div class="content">
        <h1>‚úÖ 3. Finaliser le profil du monorepo (profil de r√©f√©rence)</h1>
<p>üéØ Objectif : Cr√©er un profil d'analyse du monorepo <strong>avant migration</strong>, utilis√© comme r√©f√©rence dans tous les agents IA (g√©n√©rateurs, validateurs, synchronisateurs, etc.)</p>
<hr />
<h2>üóÇÔ∏è Fichiers de profil √† g√©n√©rer et valider</h2>
<table>
<thead>
<tr>
<th>Fichier</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>code_style_profile.json</code></td>
<td>Repr√©sente les conventions de code en vigueur : indentation, noms de classes, importations, typage</td>
</tr>
<tr>
<td><code>monorepo_dependencies.json</code></td>
<td>Liste des packages utilis√©s dans le projet (Remix, NestJS, Prisma, DTOs, tailwind, etc.)</td>
</tr>
<tr>
<td><code>nestjs_module_patterns.json</code></td>
<td>Exemple type d'un module NestJS avec structure <code>controller/service/dto/module</code></td>
</tr>
<tr>
<td><code>remix_component_patterns.json</code></td>
<td>Exemples des composants Remix utilis√©s : <code>loader.ts</code>, <code>meta.ts</code>, <code>layout.tsx</code>, <code>form.tsx</code></td>
</tr>
<tr>
<td><code>tailwind_tokens.json</code></td>
<td>Liste des classes Tailwind custom utilis√©es (couleurs, spacings, breakpoints)</td>
</tr>
</tbody>
</table>
<hr />
<h2>üìå Utilisation</h2>
<ul>
<li>Tous ces fichiers sont utilis√©s par les agents IA (dev-generator, audit-checker, route-mapper) pour :</li>
<li>Garantir une migration <strong>coh√©rente avec l'existant</strong></li>
<li>D√©tecter automatiquement les anomalies ou divergences</li>
<li>G√©n√©rer du code conforme aux pratiques internes</li>
</ul>
<hr />
<h2>‚úÖ Checklist</h2>
<ul>
<li>[ ] Les fichiers ci-dessus sont pr√©sents dans <code>/profil/</code></li>
<li>[ ] Tous les fichiers ont √©t√© valid√©s √† partir du code existant</li>
<li>[ ] Chaque agent IA les r√©f√©rence au chargement</li>
<li>[ ] Le changelog contient la date de cr√©ation du profil de r√©f√©rence</li>
<li>[ ] Une PR <code>profil-initialisation</code> est cr√©√©e avec les fichiers de base</li>
</ul>
<p>üí° Ces fichiers peuvent √™tre g√©n√©r√©s automatiquement via l'agent <code>monorepo-analyzer.ts</code>
et int√©gr√©s dans un pipeline <code>n8n</code> d√©clench√© √† chaque mise √† jour majeure.</p>
      </div>
    </div>
    
    <div class="file-section" id="10d-backlog-par-modules">
      <h2>10d-backlog-par-modules.md</h2>
      <div class="filename">10d-backlog-par-modules.md</div>
      <div class="content">
        <h1>‚úÖ 4. Organiser le backlog de migration par modules fonctionnels</h1>
<p>üéØ Objectif : Structurer le backlog de migration selon des <strong>domaines fonctionnels clairs</strong>, facilitant la gestion des d√©pendances, le versioning progressif et la coordination multi-√©quipe.</p>
<hr />
<h2>üß© Exemples de groupes de modules fonctionnels</h2>
<table>
<thead>
<tr>
<th>Groupe</th>
<th>Modules inclus</th>
<th>Avantages</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Authentification</strong></td>
<td>Login, inscription, mot de passe oubli√©</td>
<td>D√©coupl√©, peu d√©pendant</td>
</tr>
<tr>
<td><strong>Compte utilisateur</strong></td>
<td>Donn√©es personnelles, historique commandes</td>
<td>Migration autonome</td>
</tr>
<tr>
<td><strong>Panier / Commande</strong></td>
<td>Shopping Cart, √©tapes de commande, paiement</td>
<td>Bloc logique complet</td>
</tr>
<tr>
<td><strong>Produits</strong></td>
<td>Fiche produit, variantes, stocks</td>
<td>Optimis√© pour les tests UI/API</td>
</tr>
<tr>
<td><strong>Recherche &amp; navigation</strong></td>
<td>Moteur, filtres, redirections SEO</td>
<td>Impact SEO imm√©diat</td>
</tr>
<tr>
<td><strong>SEO / R√©√©criture</strong></td>
<td>Meta, URLs legacy, page 404/410/412</td>
<td>Pr√©serve l'indexation</td>
</tr>
<tr>
<td><strong>Admin &amp; backoffice</strong></td>
<td>Gestion catalogue, comptes, logs</td>
<td>Utilisateurs internes</td>
</tr>
</tbody>
</table>
<hr />
<h2>üì¶ Avantages de cette approche</h2>
<ul>
<li>‚úÖ Migration <strong>modulaire</strong> et <strong>rollbackable</strong></li>
<li>‚úÖ Moins de conflits entre branches ou fichiers</li>
<li>‚úÖ Permet une PR par bloc fonctionnel</li>
<li>‚úÖ Adapt√© √† une gestion Kanban dans <code>backlog.md</code></li>
<li>‚úÖ Revue cibl√©e, d√©ploiement par tranche</li>
</ul>
<hr />
<h2>‚úÖ √Ä faire</h2>
<ul>
<li>[ ] Lier chaque ligne de <code>13-backlog.md</code> √† un groupe fonctionnel</li>
<li>[ ] Ajouter un tag dans le tableau : <code>fonction=auth / produits / seo</code></li>
<li>[ ] Cr√©er une <strong>vue par groupe fonctionnel</strong> dans Notion ou GitHub Projects</li>
<li>[ ] Utiliser un agent IA <code>backlog-classifier.ts</code> pour classer automatiquement les fichiers</li>
</ul>
<p>üí° Cette strat√©gie est id√©ale pour synchroniser le backlog avec les fichiers PHP legacy et les blocs Remix/NestJS modernes.</p>
      </div>
    </div>
    
    <div class="file-section" id="changelog">
      <h2>changelog.md</h2>
      <div class="filename">changelog.md</div>
      <div class="content">
        <h1>Historique des modifications</h1>
<h2>2025-04-06 17:21 ‚Äì Initialisation</h2>
<ul>
<li>Cr√©ation de la structure du cahier des charges</li>
</ul>
<h2>2025-04-06 17:21 ‚Äì Mise √† jour automatique</h2>
<ul>
<li>Auteur : auto pieces equipement</li>
<li>Fichiers modifi√©s :\n</li>
</ul>
<h2>2025-04-06 17:22 ‚Äì Mise √† jour automatique</h2>
<ul>
<li>Auteur : auto pieces equipement</li>
<li>Fichiers modifi√©s :\n</li>
</ul>
<h2>2025-04-06 17:24 ‚Äì Mise √† jour automatique</h2>
<ul>
<li>Auteur : auto pieces equipement</li>
<li>Fichiers modifi√©s :\n</li>
</ul>
<h2>2025-04-06 17:25 ‚Äì Mise √† jour automatique</h2>
<ul>
<li>Auteur : auto pieces equipement</li>
<li>Fichiers modifi√©s :\n</li>
</ul>
      </div>
    </div>
    </body></html>