{
  "cahierDesChargesPath": "/workspaces/cahier-des-charge/docs/cahier-des-charges",
  "outputDir": "./reports",
  "parallel": true,
  "verbose": false,
  "showMetrics": true,
  "autoFix": true,
  "generateMigrationPlan": true,
  "validateWithCahierDesCharges": true,
  "agents": {
    "default": ["business", "structure", "data", "dependency", "quality", "strategy", "assembler"],
    "quick": ["structure", "data", "strategy"],
    "full": ["business", "structure", "data", "dependency", "quality", "strategy", "security", "assembler"]
  },
  "migrationSteps": [
    {
      "name": "Analyse initiale",
      "description": "Analyse statique du code PHP legacy",
      "agents": ["analysis/structure", "data", "dependency"]
    },
    {
      "name": "Planification de la migration",
      "description": "Génération du plan de migration détaillé",
      "agents": ["migration/business", "strategy"]
    },
    {
      "name": "Migration de la base de données",
      "description": "Génération du schéma Prisma et migration des données",
      "agents": ["analysis/data"]
    },
    {
      "name": "Génération du code",
      "description": "Création des controllers, services et composants",
      "agents": ["analysis/structure", "business", "assembler"]
    },
    {
      "name": "Tests et validation",
      "description": "Vérification de la qualité et sécurité",
      "agents": ["quality/quality", "security"]
    }
  ],
  "backendTech": {
    "framework": "NestJS",
    "database": "PostgreSQL",
    "orm": "Prisma",
    "auth": "JWT",
    "validation": "class-validator"
  },
  "frontendTech": {
    "framework": "Remix",
    "styling": "TailwindCSS",
    "stateManagement": "useState/useContext",
    "formHandling": "remix-validated-form"
  },
  "customAgents": {},
  "excludePaths": ["node_modules", "vendor", ".git", "tests"],
  "migrationConfig": {
    "version": "1.0.0",
    "timestamp": "2025-04-12T14:30:00Z",
    "author": "IA Migration Assistant",
    "description": "Configuration de migration MySQL vers PostgreSQL",
    "settings": {
      "targetDatabase": "postgres",
      "sourceDatabase": "mysql",
      "prismaEnabled": true,
      "autoIncrementStrategy": "autoincrement()",
      "uuidStrategy": "uuid()",
      "defaultIdStrategy": "cuid()",
      "timestampPrecision": 6,
      "enableTimezoneSupport": true,
      "enumStrategy": "prismaEnum"
    },
    "customTypeMapping": {
      "TINYINT(1)": {
        "postgresType": "BOOLEAN",
        "prismaType": "Boolean"
      },
      "DATETIME": {
        "postgresType": "TIMESTAMP WITH TIME ZONE",
        "prismaType": "DateTime",
        "attributes": ["@db.Timestamptz(6)"]
      },
      "VARCHAR(36)": {
        "postgresType": "UUID",
        "prismaType": "String",
        "attributes": ["@db.Uuid"]
      },
      "CHAR(36)": {
        "postgresType": "UUID",
        "prismaType": "String",
        "attributes": ["@db.Uuid"]
      },
      "LONGTEXT": {
        "postgresType": "TEXT",
        "prismaType": "String"
      },
      "MEDIUMTEXT": {
        "postgresType": "TEXT",
        "prismaType": "String"
      },
      "FLOAT": {
        "postgresType": "REAL",
        "prismaType": "Float"
      },
      "DOUBLE": {
        "postgresType": "DOUBLE PRECISION",
        "prismaType": "Float"
      },
      "JSON": {
        "postgresType": "JSONB",
        "prismaType": "Json"
      },
      "SET": {
        "postgresType": "TEXT[]",
        "prismaType": "String[]"
      }
    },
    "defaultValues": {
      "CURRENT_TIMESTAMP": "@default(now())",
      "NULL": "",
      "0": "@default(0)",
      "1": "@default(1)",
      "''": "@default(\"\")",
      "UUID()": "@default(uuid())"
    },
    "relationOptions": {
      "enableReferentialIntegrity": true,
      "enableCascadeDelete": true,
      "foreignKeyNamingPattern": "fk_${sourceTable}_${targetTable}",
      "indexNamingPattern": "idx_${table}_${column}"
    },
    "postMigrationActions": [
      {
        "type": "createIndexes",
        "enabled": true,
        "applyMode": "auto"
      },
      {
        "type": "validateConstraints",
        "enabled": true,
        "applyMode": "report"
      },
      {
        "type": "checkPerformance",
        "enabled": true,
        "applyMode": "report"
      }
    ],
    "outputFiles": {
      "schemaMap": "mysql_schema_map.json",
      "analysisReport": "sql_analysis.md",
      "prismaModels": "prisma_models.suggestion.prisma",
      "migrationDiff": "schema_migration_diff.json",
      "migrationPlan": "migration_plan.md",
      "entityGraph": "entity_graph.json",
      "indexSuggestions": "sql_index_suggestions.sql",
      "sqlBacklog": "sql_backlog.json"
    },
    "notification": {
      "enabled": true,
      "channels": [
        {
          "type": "slack",
          "webhook": "${SLACK_WEBHOOK_URL}",
          "channel": "#migration-updates"
        },
        {
          "type": "email",
          "recipients": ["${MIGRATION_TEAM_EMAIL}"]
        }
      ]
    },
    "integration": {
      "supabase": {
        "enabled": true,
        "projectId": "${SUPABASE_PROJECT_ID}",
        "apiKey": "${SUPABASE_API_KEY}",
        "tableName": "migration_reports"
      },
      "github": {
        "enabled": true,
        "repository": "${GITHUB_REPOSITORY}",
        "branchPrefix": "migration-",
        "prEnabled": true,
        "prTitle": "Migration MySQL → PostgreSQL: ${timestamp}"
      }
    },
    "advanced": {
      "transactionSize": 5000,
      "parallelTables": 4,
      "maxBatchSize": 1000,
      "enableProgressBar": true,
      "tempTablePrefix": "tmp_migration_",
      "logLevel": "info",
      "skipTablesPattern": ["^bak_", "^tmp_", "^log_"],
      "backupBeforeMigration": true
    }
  }
}