{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AB Testing Configuration for MCP Migration Strategies",
  "description": "Configuration pour effectuer des tests A/B entre différentes stratégies de migration MCP",
  "type": "object",
  "required": ["sourceFile", "strategies", "evaluationCriteria"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Identifiant unique du test A/B"
    },
    "name": {
      "type": "string",
      "description": "Nom descriptif du test A/B"
    },
    "description": {
      "type": "string",
      "description": "Description du test A/B et de son objectif"
    },
    "sourceFile": {
      "type": "string",
      "description": "Chemin vers le fichier source à migrer avec différentes stratégies"
    },
    "sourceDependencies": {
      "type": "array",
      "description": "Liste des fichiers dont dépend le fichier source",
      "items": {
        "type": "string"
      }
    },
    "strategies": {
      "type": "array",
      "description": "Liste des stratégies de migration à comparer",
      "minItems": 2,
      "items": {
        "type": "object",
        "required": ["id", "agents"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Identifiant unique de la stratégie"
          },
          "name": {
            "type": "string",
            "description": "Nom descriptif de la stratégie"
          },
          "description": {
            "type": "string",
            "description": "Description de la stratégie et de son approche"
          },
          "agents": {
            "type": "array",
            "description": "Liste des agents à utiliser dans cette stratégie, dans l'ordre d'exécution",
            "items": {
              "type": "string"
            }
          },
          "options": {
            "type": "object",
            "description": "Options spécifiques à cette stratégie",
            "additionalProperties": true
          }
        }
      }
    },
    "evaluationCriteria": {
      "type": "object",
      "description": "Critères d'évaluation pour comparer les résultats des stratégies",
      "required": ["metrics"],
      "properties": {
        "metrics": {
          "type": "array",
          "description": "Liste des métriques à mesurer pour comparer les stratégies",
          "items": {
            "type": "string",
            "enum": [
              "performance",
              "codeQuality",
              "functionalCoverage",
              "testCoverage",
              "accessibilityScore",
              "seoScore",
              "bundleSize",
              "memoryUsage",
              "numTypescriptErrors",
              "numEslintWarnings"
            ]
          }
        },
        "weights": {
          "type": "object",
          "description": "Pondération des différentes métriques (facultatif)",
          "additionalProperties": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          }
        },
        "customTests": {
          "type": "array",
          "description": "Tests personnalisés pour évaluer les résultats",
          "items": {
            "type": "object",
            "required": ["name", "command"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Nom du test"
              },
              "command": {
                "type": "string",
                "description": "Commande à exécuter pour le test"
              },
              "weight": {
                "type": "number",
                "description": "Pondération du test dans le score global",
                "minimum": 0,
                "maximum": 1
              }
            }
          }
        }
      }
    },
    "outputs": {
      "type": "object",
      "description": "Configuration des sorties du test A/B",
      "properties": {
        "reportFormat": {
          "type": "string",
          "description": "Format du rapport généré",
          "enum": ["json", "markdown", "html"]
        },
        "outputDirectory": {
          "type": "string",
          "description": "Répertoire où stocker les résultats du test A/B"
        },
        "saveGeneratedFiles": {
          "type": "boolean",
          "description": "Indique s'il faut conserver les fichiers générés par chaque stratégie"
        }
      }
    },
    "schedule": {
      "type": "object",
      "description": "Planification d'exécution automatique du test A/B",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Indique si l'exécution automatique est activée"
        },
        "cron": {
          "type": "string",
          "description": "Expression cron pour la planification"
        },
        "notifyEmail": {
          "type": "string",
          "description": "Email à notifier des résultats"
        }
      }
    }
  }
}